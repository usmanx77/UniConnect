import{j as e,r as a}from"./radix-vendor-Dhq5j3y7.js";import{A as S,a as C,B as p,b as U,m as v,u as A,D,c as O,d as Y,e as W,T as R,S as B,f as z}from"./index-YLKFyqAq.js";import{I as T,y as G,z as $,D as H,F as V,X as E,J,K,N as _,b as I,P as q,L as X,R as Q,n as Z,o as ee,O as se,S as te}from"./ui-vendor-UqaejbCm.js";import{P as ae}from"./PostCard-CUBNtBjx.js";import{L as k}from"./label-a0evEz47.js";import"./react-vendor-BWX1YzKK.js";import"./supabase-vendor-F5gKsx73.js";import"./motion-vendor-BozBRtxF.js";function re({onOpenCreatePost:s}){return e.jsxs("div",{className:"bg-card rounded-lg border border-border p-4 shadow-sm mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(S,{className:"w-10 h-10",children:e.jsx(C,{className:"bg-primary text-white",children:"Y"})}),e.jsx("input",{type:"text",placeholder:"What's on your mind?",onClick:s,readOnly:!0,className:"flex-1 bg-input-background rounded-full px-4 py-3 text-sm border border-border focus:outline-none focus:ring-2 focus:ring-ring cursor-pointer"})]}),e.jsxs("div",{className:"flex items-center gap-2 pl-13",children:[e.jsxs(p,{variant:"ghost",size:"sm",className:"rounded-lg gap-2 text-muted-foreground hover:text-primary hover:bg-accent flex-1",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Photo"})]}),e.jsxs(p,{variant:"ghost",size:"sm",className:"rounded-lg gap-2 text-muted-foreground hover:text-primary hover:bg-accent flex-1",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Poll"})]}),e.jsxs(p,{variant:"ghost",size:"sm",className:"rounded-lg gap-2 text-muted-foreground hover:text-primary hover:bg-accent flex-1",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Feeling"})]})]})]})}function ne({storyGroups:s,initialGroupIndex:o,isOpen:m,onClose:d,onView:n}){const[r,i]=a.useState(o),[l,c]=a.useState(0),[h,f]=a.useState(0),[t,j]=a.useState(!1),u=s[r],x=u?.stories[l],N=5e3,w=a.useCallback(()=>{const b=s[r];if(!b){d();return}if(l<b.stories.length-1){c(g=>g+1),f(0);return}if(r<s.length-1){i(g=>g+1),c(0),f(0);return}d()},[r,l,d,s]),F=a.useCallback(()=>{if(s[r]){if(l>0){c(g=>g-1),f(0);return}if(r>0){const g=s[r-1];if(!g)return;const M=Math.max(g.stories.length-1,0);i(L=>L-1),c(M),f(0)}}},[r,l,s]);return a.useEffect(()=>{if(!m||t)return;const b=setInterval(()=>{f(g=>g>=100?(w(),0):g+100/N*100)},100);return()=>clearInterval(b)},[w,m,t]),a.useEffect(()=>{x&&n(x.id)},[x,n]),x?e.jsx(U,{children:m&&e.jsxs(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black flex items-center justify-center",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 z-10 flex gap-1",children:u.stories.map((b,g)=>e.jsxs("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:[g===l&&e.jsx("div",{className:"h-full bg-white transition-all",style:{width:`${h}%`}}),g<l&&e.jsx("div",{className:"h-full bg-white"})]},g))}),e.jsxs("div",{className:"absolute top-6 left-0 right-0 px-4 z-10 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-10 h-10 border-2 border-white",children:e.jsx(C,{className:"bg-primary text-white",children:u.userName[0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:u.userName}),e.jsx("p",{className:"text-white/70 text-sm",children:u.latestStoryTime})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>j(!t),className:"text-white hover:bg-white/20",children:t?e.jsx(H,{className:"h-5 w-5"}):e.jsx(V,{className:"h-5 w-5"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:d,className:"text-white hover:bg-white/20",children:e.jsx(E,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"relative w-full max-w-md h-[80vh] rounded-2xl overflow-hidden",onClick:w,children:[x.mediaUrl?e.jsx("img",{src:x.mediaUrl,alt:"Story",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",style:{background:x.backgroundColor||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsx("p",{className:"text-white text-center text-2xl",children:x.content})}),x.mediaUrl&&x.content&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 to-transparent",children:e.jsx("p",{className:"text-white",children:x.content})})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:F,className:"absolute left-4 text-white hover:bg-white/20 h-12 w-12",disabled:r===0&&l===0,children:e.jsx(J,{className:"h-8 w-8"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:w,className:"absolute right-4 text-white hover:bg-white/20 h-12 w-12",children:e.jsx(K,{className:"h-8 w-8"})})]})}):null}const P=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #30cfd0 0%, #330867 100%)"];function le({open:s,onOpenChange:o}){const[m,d]=a.useState("text"),[n,r]=a.useState(""),[i,l]=a.useState(null),[c,h]=a.useState(P[0]),{addStory:f}=A(),t=u=>{const x=u.target.files?.[0];if(x){const N=new FileReader;N.onloadend=()=>{l(N.result)},N.readAsDataURL(x)}},j=()=>{if(!n.trim()&&!i){I.error("Please add some content to your story");return}f({userId:"currentUser",userName:"You",userAvatar:void 0,department:"Computer Science",content:n||"",mediaUrl:i||void 0,mediaType:i?"image":void 0,backgroundColor:i?void 0:c}),I.success("Story posted!"),r(""),l(null),d("text"),o(!1)};return e.jsx(D,{open:s,onOpenChange:o,children:e.jsxs(O,{className:"sm:max-w-md",children:[e.jsx(Y,{children:e.jsx(W,{children:"Create Story"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:m==="text"?"default":"outline",onClick:()=>d("text"),className:"flex-1 rounded-xl",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Text"]}),e.jsxs(p,{variant:m==="image"?"default":"outline",onClick:()=>d("image"),className:"flex-1 rounded-xl",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Image"]})]}),m==="text"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Background"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:P.map(u=>e.jsx("button",{onClick:()=>h(u),className:`h-10 rounded-lg transition-all ${c===u?"ring-2 ring-primary scale-110":""}`,style:{background:u}},u))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"content",children:"Story Text"}),e.jsx(R,{id:"content",placeholder:"What's on your mind?",value:n,onChange:u=>r(u.target.value),className:"min-h-[100px] rounded-xl",maxLength:150}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[n.length,"/150"]})]}),e.jsx("div",{className:"h-48 rounded-xl flex items-center justify-center p-4",style:{background:c},children:e.jsx("p",{className:"text-white text-center text-xl",children:n||"Your story text will appear here"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:i?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i,alt:"Story preview",className:"w-full h-64 object-cover rounded-xl"}),e.jsx(p,{variant:"destructive",size:"icon",onClick:()=>l(null),className:"absolute top-2 right-2 rounded-full",children:e.jsx(E,{className:"h-4 w-4"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center h-64 border-2 border-dashed border-border rounded-xl cursor-pointer hover:border-primary transition-colors",children:[e.jsx(T,{className:"h-12 w-12 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t,className:"hidden"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"caption",children:"Caption (Optional)"}),e.jsx(R,{id:"caption",placeholder:"Add a caption...",value:n,onChange:u=>r(u.target.value),className:"rounded-xl",maxLength:100})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"outline",onClick:()=>o(!1),className:"flex-1 rounded-xl",children:"Cancel"}),e.jsx(p,{onClick:j,className:"flex-1 rounded-xl",children:"Post Story"})]})]})]})})}function ie(){const{storyGroups:s,viewStory:o}=A(),[m,d]=a.useState(!1),[n,r]=a.useState(!1),[i,l]=a.useState(0),c=h=>{l(h),d(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-card border border-border rounded-lg shadow-sm",children:e.jsx(B,{className:"w-full",children:e.jsxs("div",{className:"flex gap-4 p-4 overflow-x-auto",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(!0),className:"flex-shrink-0 flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center",children:e.jsx(q,{className:"h-6 w-6 text-white"})})}),e.jsx("span",{className:"text-xs text-center max-w-[64px] truncate",children:"Your Story"})]}),s.map((h,f)=>e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(f),className:"flex-shrink-0 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:`p-0.5 rounded-full ${h.hasUnviewed?"bg-gradient-to-br from-primary via-purple-500 to-pink-500":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("div",{className:"bg-card rounded-full p-0.5",children:e.jsx(S,{className:"w-14 h-14",children:e.jsx(C,{className:"bg-primary text-white",children:h.userName[0]})})})})}),e.jsx("span",{className:"text-xs text-center max-w-[64px] truncate",children:h.userName.split(" ")[0]})]},h.userId))]})})}),e.jsx(ne,{storyGroups:s,initialGroupIndex:i,isOpen:m,onClose:()=>d(!1),onView:h=>o(h,"currentUser")}),e.jsx(le,{open:n,onOpenChange:r})]})}function oe({className:s,...o}){return e.jsx("div",{"data-slot":"card",className:z("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border-2 shadow-lg",s),...o})}function ce(s,o={}){const{threshold:m=.5,rootMargin:d="100px"}=o,[n,r]=a.useState(!1),i=a.useRef(null),l=a.useRef(null);return a.useEffect(()=>{const c=l.current;if(c)return i.current=new IntersectionObserver(h=>{h[0].isIntersecting&&!n&&(r(!0),s(),setTimeout(()=>r(!1),500))},{threshold:m,rootMargin:d}),i.current.observe(c),()=>{i.current&&i.current.disconnect()}},[s,m,d,n]),{targetRef:l,isLoading:n}}function de({threshold:s=80,onRefresh:o}){const[m,d]=a.useState(!1),[n,r]=a.useState(0),[i,l]=a.useState(!1),c=a.useRef(0),h=a.useRef(null),f=a.useCallback(u=>{const x=h.current;x&&x.scrollTop===0&&(c.current=u.touches[0].clientY,d(!0))},[]),t=a.useCallback(u=>{if(!m||c.current===0)return;const N=u.touches[0].clientY-c.current;N>0&&r(Math.min(N,s*1.5))},[m,s]),j=a.useCallback(async()=>{if(d(!1),n>=s){l(!0);try{await o()}finally{l(!1),r(0)}}else r(0);c.current=0},[n,s,o]);return{containerRef:h,handleTouchStart:f,handleTouchMove:t,handleTouchEnd:j,isPulling:m,pullDistance:n,isRefreshing:i,shouldRefresh:n>=s}}function me({onRefresh:s,children:o}){const{containerRef:m,handleTouchStart:d,handleTouchMove:n,handleTouchEnd:r,pullDistance:i,isRefreshing:l,shouldRefresh:c}=de({onRefresh:s});return e.jsxs("div",{ref:m,onTouchStart:d,onTouchMove:n,onTouchEnd:r,className:"overflow-auto h-full",style:{overscrollBehavior:"contain"},children:[e.jsx(v.div,{animate:{height:l?60:i>0?i:0},transition:{type:"spring",stiffness:300,damping:30},className:"flex items-center justify-center overflow-hidden",children:e.jsx("div",{className:"flex flex-col items-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-5 w-5 text-primary animate-spin"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Refreshing..."})]}):e.jsx(v.div,{animate:{rotate:c?180:0,scale:i>0?1:0},children:e.jsx(Q,{className:"h-5 w-5 text-primary"})})})}),o]})}function y({className:s,...o}){return e.jsx("div",{"data-slot":"skeleton",className:z("bg-accent animate-pulse rounded-md",s),...o})}function Ne({onOpenCreatePost:s}){const[o,m]=a.useState([{id:"1",authorId:"1",author:"Sarah Johnson",department:"Computer Science",batch:"Fall 2023",timeAgo:"2h ago",content:"Just finished my Machine Learning project! The results are amazing. Can't wait to present it next week. Anyone else working on AI projects this semester?",image:"https://images.unsplash.com/photo-1582192904915-d89c7250b235?w=800",reactions:{like:24,love:5,celebrate:3,support:2,insightful:8},totalReactions:42,comments:8,liked:!0},{id:"2",authorId:"2",author:"Michael Chen",department:"Business Administration",batch:"Spring 2024",timeAgo:"4h ago",content:"Reminder: Marketing Club meets tomorrow at 5 PM in Building A, Room 203. We'll be discussing the upcoming campus event. See you there! 🚀",reactions:{like:15,love:2,celebrate:5,support:1,insightful:0},totalReactions:23,comments:5},{id:"3",authorId:"3",author:"Emily Rodriguez",department:"Psychology",batch:"Fall 2023",timeAgo:"6h ago",content:"Looking for study partners for the Cognitive Psychology exam. Anyone interested in forming a study group? Let's ace this together! 📚",image:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800",reactions:{like:31,love:4,celebrate:0,support:12,insightful:3},totalReactions:50,comments:12},{id:"4",authorId:"4",author:"David Miller",department:"Engineering",batch:"Spring 2024",timeAgo:"8h ago",content:"What's your take on sustainable energy solutions?",poll:{id:"poll1",question:"What's your take on sustainable energy solutions?",options:[{id:"1",text:"Solar Power",votes:145,voters:[]},{id:"2",text:"Wind Energy",votes:89,voters:[]},{id:"3",text:"Hydroelectric",votes:56,voters:[]},{id:"4",text:"Nuclear",votes:34,voters:[]}],totalVotes:324,endsAt:"in 2 days",allowMultiple:!1},reactions:{like:47,love:3,celebrate:2,support:8,insightful:19},totalReactions:79,comments:19},{id:"5",authorId:"5",author:"Jessica Wang",department:"Computer Science",batch:"Fall 2023",timeAgo:"1d ago",content:"Campus tour highlights! Check out these amazing spots around our university 📸",images:["https://images.unsplash.com/photo-1562774053-701939374585?w=800","https://images.unsplash.com/photo-1541339907198-e08756dedf3f?w=800","https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=800"],reactions:{like:89,love:23,celebrate:12,support:5,insightful:2},totalReactions:131,comments:24}]),[d,n]=a.useState(!1),r=[{title:"Tech Talk: AI & Ethics",date:"Oct 12",organizer:"CS Society",color:"from-blue-500 to-cyan-500"},{title:"Fall Sports Day",date:"Oct 15",organizer:"Athletics Club",color:"from-orange-500 to-red-500"},{title:"Career Fair 2024",date:"Oct 20",organizer:"University",color:"from-purple-500 to-pink-500"}],i=[{tag:"#CampusLife",posts:342},{tag:"#StudyTips",posts:287},{tag:"#CareerWeek",posts:198},{tag:"#UniversityEvents",posts:156}],l=[{id:"1",name:"Alex Kumar",department:"Computer Science",batch:"Fall 2023",mutualConnections:8,reason:"Same department",matchScore:95},{id:"2",name:"Maria Garcia",department:"Computer Science",batch:"Spring 2024",mutualConnections:5,reason:"Same department",matchScore:88}],c=async()=>{await new Promise(t=>setTimeout(t,1500)),I.success("Feed refreshed!")},h=()=>{n(!0),setTimeout(()=>{const t=[{id:`${o.length+1}`,authorId:`${o.length+1}`,author:"New User",department:"Engineering",batch:"Fall 2023",timeAgo:"2d ago",content:"Another interesting post from the feed!",reactions:{like:12,love:3,celebrate:1,support:0,insightful:2},totalReactions:18,comments:4}];m([...o,...t]),n(!1)},1e3)},{targetRef:f}=ce(h);return e.jsx(me,{onRefresh:c,children:e.jsxs("div",{className:"max-w-6xl mx-auto px-2 pt-6 pb-20 md:px-4 md:pt-8 md:pb-6",children:[e.jsx("div",{className:"mt-6 md:mt-8 mb-6 md:mb-8",children:e.jsx(ie,{})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-2 md:gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(re,{onOpenCreatePost:s}),o.map((t,j)=>e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:j*.05},children:e.jsx(ae,{post:t})},t.id)),e.jsx("div",{ref:f,className:"py-4",children:d&&e.jsx("div",{className:"space-y-4",children:e.jsxs(oe,{className:"p-4 rounded-2xl",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(y,{className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(y,{className:"h-4 w-32"}),e.jsx(y,{className:"h-3 w-48"})]})]}),e.jsx(y,{className:"h-20 w-full mb-3"}),e.jsx(y,{className:"h-48 w-full rounded-xl"})]})})})]}),e.jsxs("div",{className:"hidden lg:block space-y-4",children:[e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-card rounded-lg border border-border p-4 shadow-sm sticky top-[92px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"People You May Know"})]}),e.jsx("div",{className:"space-y-3",children:l.map(t=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(S,{className:"w-10 h-10",children:e.jsx(C,{className:"bg-primary text-white text-xs",children:t.name[0]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium truncate text-foreground",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.department}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.mutualConnections," mutual connections"]})]}),e.jsx(p,{size:"sm",variant:"outline",className:"rounded-lg flex-shrink-0 text-xs px-3 py-1",children:"Connect"})]},t.id))}),e.jsx(p,{variant:"ghost",className:"w-full mt-4 rounded-lg text-sm text-primary hover:bg-accent",children:"View All Suggestions"})]}),e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-card rounded-lg border border-border p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Upcoming Events"})]}),e.jsx("div",{className:"space-y-3",children:r.map((t,j)=>e.jsxs("div",{className:"relative p-3 bg-gradient-to-r rounded-lg overflow-hidden group cursor-pointer hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${t.color} opacity-5 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative",children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:t.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.date," • ",t.organizer]})]})]},j))}),e.jsx(p,{variant:"ghost",className:"w-full mt-4 rounded-lg text-sm text-primary hover:bg-accent",children:"View All Events"})]}),e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-card rounded-lg border border-border p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Trending Topics"})]}),e.jsx("div",{className:"space-y-2",children:i.map((t,j)=>e.jsxs("button",{className:"block w-full text-left px-3 py-2 rounded-lg hover:bg-accent transition-colors group",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-primary group-hover:underline",children:t.tag}),e.jsx(te,{className:"h-3 w-3 text-muted-foreground"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.posts," posts"]})]},j))})]})]})]})]})})}export{Ne as HomePage};
